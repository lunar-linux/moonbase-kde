From 54c01bab826ef9fe8f3d46f36650081430aaa392 Mon Sep 17 00:00:00 2001
From: Carl Schwan <carl@carlschwan.eu>
Date: Thu, 4 Dec 2025 12:03:26 +0100
Subject: [PATCH] Fix SQL syntax error when using MariaDB 12.1

(cherry picked from commit ac354634de0571e63c6ca6e003d43d81f156e1ff)

Co-authored-by: Tobias Leupold <tl@stonemx.de>
---
 src/server/storage/dbinitializer_p.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/server/storage/dbinitializer_p.cpp b/src/server/storage/dbinitializer_p.cpp
index 262ecaa4c..0328abd18 100644
--- a/src/server/storage/dbinitializer_p.cpp
+++ b/src/server/storage/dbinitializer_p.cpp
@@ -112,7 +112,7 @@ QStringList DbInitializerMySql::buildAddForeignKeyConstraintStatements(const Tab
 
 QStringList DbInitializerMySql::buildRemoveForeignKeyConstraintStatements(const DbIntrospector::ForeignKey &fk, const TableDescription &table) const
 {
-    return {QStringLiteral("ALTER TABLE %1 DROP FOREIGN KEY %2").arg(table.name, fk.name)};
+    return {QStringLiteral("ALTER TABLE %1 DROP FOREIGN KEY `%2`").arg(table.name, fk.name)};
 }
 
 // END MySQL
-- 
GitLab

